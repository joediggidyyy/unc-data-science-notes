{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://codesentinel.dev/schemas/job_classification.schema.json",
  "title": "CodeSentinel Job Classification Table",
  "description": "Defines the canonical SEAM-aligned job tiers (J0-J4) and their reporting/approval requirements.",
  "type": "object",
  "additionalProperties": false,
  "required": [
    "schema_version",
    "generated_at",
    "tiers"
  ],
  "properties": {
    "schema_version": {
      "type": "string",
      "pattern": "^v?[0-9]+\\.[0-9]+\\.[0-9]+$",
      "description": "Semantic version of this classification table."
    },
    "generated_at": {
      "type": "string",
      "format": "date-time",
      "description": "ISO8601 timestamp describing when this table was produced."
    },
    "tiers": {
      "type": "array",
      "minItems": 1,
      "items": {
        "type": "object",
        "additionalProperties": false,
        "required": [
          "id",
          "name",
          "summary",
          "complexity_signals",
          "reporting_bundle",
          "approvals",
          "seam_contract",
          "automation_hooks"
        ],
        "properties": {
          "id": {
            "type": "string",
            "pattern": "^J[0-4]$",
            "description": "Unique tier identifier (J0 through J4)."
          },
          "name": {
            "type": "string",
            "description": "Human-friendly tier name (e.g., Routine Automation)."
          },
          "summary": {
            "type": "string",
            "description": "One paragraph description of the tier's purpose."
          },
          "complexity_signals": {
            "type": "object",
            "additionalProperties": false,
            "required": [
              "security",
              "efficiency",
              "minimalism",
              "runtime",
              "blast_radius"
            ],
            "properties": {
              "security": {
                "type": "string",
                "description": "Security triggers for this tier (credentials, environments, regulated data, etc.)."
              },
              "efficiency": {
                "type": "string",
                "description": "Signals related to engineering effort, branching paths, or multi-agent coordination."
              },
              "minimalism": {
                "type": "string",
                "description": "Criteria ensuring single-source-of-truth and anti-duplication expectations."
              },
              "runtime": {
                "type": "string",
                "description": "Typical runtime window or timing risk (minutes/hours/days)."
              },
              "blast_radius": {
                "type": "string",
                "description": "Systems or audiences affected if the job fails."
              }
            }
          },
          "reporting_bundle": {
            "type": "object",
            "additionalProperties": false,
            "required": [
              "required_documents",
              "machine_outputs",
              "distribution_channels"
            ],
            "properties": {
              "required_documents": {
                "type": "array",
                "minItems": 1,
                "items": {
                  "type": "string"
                },
                "description": "List of human-readable artifacts that must be produced (markdown reports, release notes, etc.)."
              },
              "machine_outputs": {
                "type": "array",
                "items": {
                  "type": "string"
                },
                "description": "Set of structured assets that automation expects (JSON manifests, metrics payloads)."
              },
              "distribution_channels": {
                "type": "array",
                "minItems": 1,
                "items": {
                  "type": "string",
                  "enum": [
                    "logs",
                    "docs",
                    "alerts",
                    "context_tier",
                    "intelligence_tier"
                  ]
                },
                "description": "Where the outputs must be published or promoted."
              }
            }
          },
          "approvals": {
            "type": "object",
            "additionalProperties": false,
            "required": [
              "required",
              "roles"
            ],
            "properties": {
              "required": {
                "type": "boolean",
                "description": "Whether explicit human approval is mandatory before execution."
              },
              "roles": {
                "type": "array",
                "items": {
                  "type": "string"
                },
                "description": "List of authority roles that must sign off (release manager, incident commander, etc.)."
              }
            }
          },
          "seam_contract": {
            "type": "object",
            "additionalProperties": false,
            "required": [
              "security",
              "efficiency",
              "minimalism"
            ],
            "properties": {
              "security": {
                "type": "string",
                "description": "Security-first guardrails mandated at this tier."
              },
              "efficiency": {
                "type": "string",
                "description": "Efficiency expectations (automation level, caching, multi-agent coordination)."
              },
              "minimalism": {
                "type": "string",
                "description": "Minimalism constraints (single source of truth, archive-before-delete, CLI-first)."
              }
            }
          },
          "automation_hooks": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Automation entry points that should react to this tier (scheduler, ORACL promotions, manifests)."
          },
          "examples": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Representative jobs that map to this tier."
          }
        }
      }
    }
  }
}
